"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _dividerWidth,Divider=function(){function s(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;_classCallCheck(this,s),this.dividerWidth=n,this._moving=!1,this.dividerEl=e,this.beforeEl=t,this.afterEl=i,null!=this.beforeEl&&(this.beforeEl.pane.dividerAfter=this),null!=this.afterEl&&(this.afterEl.pane.dividerBefore=this),this.dividerEl.addEventListener("mousedown",this.mouseDown.bind(this)),document.addEventListener("mousemove",this.documentMouseMove.bind(this)),this.layout()}return _createClass(s,[{key:"mouseDown",value:function(e){this._moving=!0,this.measureDimensions(),document.addEventListener("mouseup",this.stopMove.bind(this)),e.preventDefault()}},{key:"documentMouseMove",value:function(e){this._moving&&this.dragDivider(e)}},{key:"stopMove",value:function(){this._moving=!1,document.removeEventListener("mouseup",this.stopMove.bind(this))}},{key:"resize",value:function(e,t){t.pane.resize(e+this.getElSize(t))}},{key:"moveBack",value:function(e){this.resize(e,this.beforeEl)}},{key:"moveForward",value:function(e){this.resize(e,this.afterEl)}},{key:"avaliableBefore",value:function(){return this.getElSize(this.beforeEl)-this.beforeEl.pane.getMinSize()}},{key:"avaliableAfter",value:function(){return this.getElSize(this.afterEl)-this.afterEl.pane.getMinSize()}},{key:"dragDivider",value:function(e){var t=this.getMousePos(e)-this.getOffset(this.beforeEl);this.resizeWithProposals(t,this._maxSize-t)}},{key:"resizeWithProposals",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(2<n)){var s=e>=this.beforeEl.pane.getMinSize(),r=t>=this.afterEl.pane.getMinSize();if(s&&r){var a=[];this.beforeEl.parentNode.childNodes.forEach(function(e,t){"DIV"===e.nodeName&&e!==i.beforeEl&&(a[t]=e.style.display,e.style.display="none")}),this.beforeEl.pane.resize(e),this.afterEl.pane.resize(t),this.beforeEl.parentNode.childNodes.forEach(function(e,t){"DIV"===e.nodeName&&e!==i.beforeEl&&(e.style.display=a[t])})}else!s&&r?this.resizeWithProposals(this.beforeEl.pane.getMinSize(),this._maxSize-this.beforeEl.pane.getMinSize(),n+1):s&&!r&&this.resizeWithProposals(this._maxSize-this.afterEl.pane.getMinSize(),this.afterEl.pane.getMinSize(),n+1)}}},{key:"measureDimensions",value:function(){this._maxSize=this.getElSize(this.beforeEl)+this.getElSize(this.afterEl)}}]),s}(),DividerVertical=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Divider),_createClass(t,[{key:"layout",value:function(){this.dividerEl.style.cursor="ew-resize",this.dividerEl.style.flex="none",this.dividerEl.style.height="100%",this.dividerEl.style.width=this.dividerWidth}},{key:"getElSize",value:function(e){return e.offsetWidth}},{key:"getOffset",value:function(e){return e.getBoundingClientRect().left+document.body.scrollLeft}},{key:"getMousePos",value:function(e){return e.clientX}}]),t}(),DividerHorizontal=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Divider),_createClass(t,[{key:"layout",value:function(){this.dividerEl.style.cursor="ns-resize",this.dividerEl.style.flex="none",this.dividerEl.style.width="100%",this.dividerEl.style.height=this.dividerWidth}},{key:"getElSize",value:function(e){return e.offsetHeight}},{key:"getOffset",value:function(e){return e.getBoundingClientRect().top+document.body.scrollTop}},{key:"getMousePos",value:function(e){return e.clientY}}]),t}(),Pane=function(){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5,t=arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100;_classCallCheck(this,s),this.min=e,this.minPx=n,this.el=t,this.dividerBefore=void 0,this.dividerAfter=void 0,this.weight=i,this.resizeTO=void 0,this.resizeCallback=void 0,window.addEventListener("resize",function(){this.layout()}.bind(this))}return _createClass(s,[{key:"layout",value:function(){this._getSize()<this.minPx&&this.adjustSize(this.minPx)}},{key:"setOnResize",value:function(e){this.resizeCallback=e}},{key:"_getInPercent",value:function(e,t){if("number"==typeof e){return e/t*100}if("%"==e.substring(e.length-1))return parseFloat(e.substring(0,e.length-1));parseFloat(e);return e/t*100}},{key:"_getInPx",value:function(e,t){return"number"==typeof e?e:"%"==e.substring(e.length-1)?parseFloat(e.substring(0,e.length-1))*t/100:parseFloat(e)}},{key:"_resizeWithProposals",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(1<i)return!1;var n=null==this.dividerAfter||0<=this.dividerAfter.avaliableAfter()+t,s=null==this.dividerBefore||0<=this.dividerBefore.avaliableBefore()+e;return s&&n?(null!=this.dividerBefore&&this.dividerBefore.moveBack(e),null!=this.dividerAfter&&this.dividerAfter.moveForward(t),!0):!s&&n?this._resizeWithProposals(this.dividerBefore.avaliableBefore(),e+t-this.dividerBefore.avaliableBefore(),i+1):s&&!n?this._resizeWithProposals(e+t-this.dividerAfter.avaliableAfter(),this.dividerAfter.avaliableAfter(),i+1):void 0}},{key:"adjustSize",value:function(e){var t=this._getInPx(e,this._getParentSize()),i=this._getSize()-t;null!=this.dividerBefore&&null!=this.dividerAfter&&(i/=2),this._resizeWithProposals(i,i)&&this.resize(e)}},{key:"getMinSize",value:function(){var e=this._getInPx(this.min+"%",this._getParentSize());return e>this.minPx?e:this.minPx}},{key:"resize",value:function(e){var t=0;if(t+=null!=this.dividerBefore?this.dividerBefore.dividerWidth/2:0,t+=null!=this.dividerAfter?this.dividerAfter.dividerWidth/2:0,null==e)return this._setSize("calc("+this._getSizeCSS()+" - "+t+"px)"),void(void 0!==this.resizeCallback&&this.resizeCallback(this._getSize()));var i=this._getInPx(e,this._getParentSize());i+=t;var n=this._getInPercent(i,this._getParentSize());this._setSize("calc("+n+"% - "+t+"px)"),void 0!==this.resizeCallback&&this.resizeCallback(this._getSize())}}]),s}(),PaneHorizontal=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Pane),_createClass(t,[{key:"_getSize",value:function(){return this.el.offsetWidth}},{key:"_getParentSize",value:function(){return this.el.parentNode.offsetWidth}},{key:"_setSize",value:function(e){this.el.style.width=e}},{key:"_getSizeCSS",value:function(){return this.el.style.width}}]),t}(),PaneVertical=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Pane),_createClass(t,[{key:"_getSize",value:function(){return this.el.offsetHeight}},{key:"_getParentSize",value:function(){return this.el.parentNode.offsetHeight}},{key:"_setSize",value:function(e){this.el.style.height=e}},{key:"_getSizeCSS",value:function(){return this.el.style.height}}]),t}();function SplitPane(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;_dividerWidth=t,null==e&&(e=document.body);var i=[],n=Array.from(e.children);0<n.filter(function(e){return e.classList.contains("pane-horizontal")}).length&&(e.style.display="flex"),n.filter(function(e){return e.classList.contains("split-pane")}).forEach(function(e){e.classList.contains("pane-vertical")?e.type="vertical":e.classList.contains("pane-horizontal")&&(e.type="horizontal"),e.added||(addChildren(e),i.push(e))}),layoutChildren(i)}function addChildren(t){t.added=!0,null==t.childPanes&&(t.childPanes=[]),Array.from(t.children).filter(function(e){return e.classList.contains("split-pane")}).forEach(function(e){t.style.display="flex",t.style.flex="none",t.classList.contains("pane-horizontal")&&(t.style.flexDirection="column"),t.childPanes.push(e),addChildren(e)})}function layoutChildren(e){null==e||e.length<1||(layoutSquare(e=Array.from(e)),e.forEach(function(e){layoutChildren(e.children)}))}function getClassValue(e,t,i){e.classList.forEach(function(e){e.substr(0,t.length)==t&&i(e.substr(t.length))})}function layoutSquare(e){var a=[];e.forEach(function(e){e.classList.contains("pane-vertical")&&a.push(e),e.classList.contains("pane-horizontal")&&a.push(e)});var o=0;a.forEach(function(e,t){var i,n,s;getClassValue(e,"pane-weight-",function(e){i=parseInt(e)}),getClassValue(e,"pane-min-",function(e){n=parseInt(e)}),getClassValue(e,"pane-minpx-",function(e){s=parseInt(e)}),o+=null!=i?i:1,e.classList.contains("pane-vertical")?e.pane=new PaneVertical(n,e,i,s):e.pane=new PaneHorizontal(n,e,i,s)}),a.forEach(function(e,t){var i,n=e.pane,s=100/o*n.weight,r=100/o*n.weight;e.classList.contains("pane-vertical")&&((i=document.createElement("div")).classList.add("pane-divider"),0<t&&(i.divder=new DividerHorizontal(i,a[t-1],e,_dividerWidth)),s=100);e.classList.contains("pane-horizontal")&&((i=document.createElement("div")).classList.add("pane-divider"),0<t&&(i.divder=new DividerVertical(i,a[t-1],e,_dividerWidth)),r=100);0<t&&e.parentNode.insertBefore(i,e),e.style.height=r+"%",e.style.width=s+"%"}),a.forEach(function(e,t){e.classList.contains("pane-horizontal")&&e.pane.resize(),e.classList.contains("pane-vertical")&&e.pane.resize(),e.pane.layout()})}function createPane(e){}